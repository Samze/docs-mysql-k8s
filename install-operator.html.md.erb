---
title: Installing the Tanzu MySQL for Kubernetes Operator
owner: MySQL
---

<%= partial '../../mysql-k8s/partials/mysql-k8s/product-beta-warning' %>


<strong><%= modified_date %></strong>

This topic describes how operators install, configure,
and deploy the <%= vars.product_full %> Operator.

## <a id="overview"></a> Overview

To install and configure <%= vars.product_short %>, you must download resources and install 
the <%= vars.product_short %> Operator using Helm.

To download resources and install the Operator:

1. [Download Resources](#download)
1. [(Optional) Edit Helm Chart](#edit-chart)
1. [Install Operator](#install)

## <a id='prereq'></a>Prerequisites

Before you deploy the <%= vars.product_short %> Operator, you need:

* Access to Tanzu Network and Tanzu Network Registry.

* The Helm CLI installed. For more information, see [Installing 
Helm](https://helm.sh/docs/intro/install/) from the Helm documentation.

* The Kubernetes command line tool (kubectl) installed. For more 
information, see [Install and Set Up kubectl](https://kubernetes.io/docs/tasks/tools/install-kubectl/) 
from the Kubernetes documentation.

* The Docker command line tool installed and Docker running on your machine.

* An existing Kubernetes environment.

* `cluster-admin` ClusterRole access to the Kubernetes cluster.



## <a id="download"></a> Download Resources

To install the <%= vars.product_short %> Operator, you must download
the deployment templates and artifact references.

To download the resources:

1. Log in to Helm from the command line by running:
  <pre>helm registry login registry.pivotal.io \
    --username=USER-EMAIL --password=USER-PASSWORD</pre>

1. Log in to [Tanzu Network](https://network.pivotal.io) and go to the **<%= vars.product_full %>** product page.

1. Click **Tanzu MySQL Deployment Templates** to download the deployment templates to your machine.

1. Click **Artifact References** to navigate into the artifacts folder. Keep the page 
open to reference in the following step.

1. Download each of the artifact references using the command line.
  1. **To download `tanzu-mysql-operator-chart` to the Helm cache:** Click the artifact from Tanzu Network and paste the 
  two commands into the command line.
  <br><%= image_tag("tanzu-mysql-operator-artifact.png", :width => "450px", :alt=>"Modal shows 4 pieces of data: type, digest, 'set the environment variable' and 'pull this chart'") %>
  <br>For example:
  <pre class="terminal">$ export HELM_EXPERIMENTAL_OCI=1
$ helm chart pull registry.pivotal.io/tanzu-mysql-for-kubernetes/tanzu-mysql-operator-chart:v0.1.0
<br>v0.1.0: Pulling from registry.pivotal.io/tanzu-mysql-for-kubernetes/tanzu-mysql-operator-chart
ref:     <span style="color: #77bf00;">registry.pivotal.io/tanzu-mysql-for-kubernetes/tanzu-mysql-operator-chart:v0.1.0</span>
digest:  2b6e1d010ab1737dcc5a426b223a06db1c616107d2ceaf368db6fda48d96a61a
size:    4.2 KiB
name:    tanzu-mysql-operator
version: v0.1.0
Status: Downloaded newer chart for registry.pivotal.io/tanzu-mysql-for-kubernetes/tanzu-mysql-operator-chart:v0.1.0</pre>
  Record the `ref` value from the output.<br><br>
  1. **To download `tanzu-mysql-instance`:** Click the artifact from Tanzu Network and paste the 
  command into the command line.
  <br><br>For example:
  <pre class="terminal">$ docker pull registry.pivotal.io/tanzu-mysql-for-kubernetes/tanzu-mysql-instance:v0.1.0
    <br>v0.1.0: Pulling from tanzu-mysql-for-kubernetes/tanzu-mysql-instance
f22ccc0b8772: Pull complete
3cf8fb62ba5f: Pull complete
e80c964ece6a: Pull complete
0c31331fda89: Pull complete
0e9674cd2c60: Pull complete
d88e035d5311: Pull complete
5055f7e93495: Pull complete
80e0c3183303: Pull complete
6312f33f1306: Pull complete
47733910cd21: Pull complete
4ac582ac7e82: Pull complete
e9ad4cffabdc: Pull complete
4b9107ee1e3e: Pull complete
faffd54990ce: Pull complete
Digest: sha256:78073dcf626603da192b78643bda24e0098f944d0bd54da1d60924b20d5eea8c
Status: Downloaded newer image for registry.pivotal.io/tanzu-mysql-for-kubernetes/tanzu-mysql-instance:v0.1.0
registry.pivotal.io/tanzu-mysql-for-kubernetes/tanzu-mysql-instance:v0.1.0</pre>
  1. **To download `tanzu-mysql-operator`:** Click the artifact from Tanzu Network and paste the 
  command into the command line.
  <br><br>For example:
  <pre class="terminal">$ docker pull registry.pivotal.io/tanzu-mysql-for-kubernetes/tanzu-mysql-operator:v0.1.0
    <br>v0.1.0: Pulling from tanzu-mysql-for-kubernetes/tanzu-mysql-operator
be69922ffb42: Pull complete
ef291e196a72: Pull complete
Digest: sha256:91664f6866b7228b68d3fb9ff8e13af95f618b7b78e5fd35690dd29394a08db1
Status: Downloaded newer image for registry.pivotal.io/tanzu-mysql-for-kubernetes/tanzu-mysql-operator:v0.1.0
registry.pivotal.io/tanzu-mysql-for-kubernetes/tanzu-mysql-operator:v0.1.0</pre>

1. Export the Helm chart to your local machine by running: 
  <pre>helm chart export REGISTRY-URL</pre>
  Where `REGISTRY-URL` is the `ref` value you recorded in the previous step.
  For example:
  <pre class="terminal">$ helm chart export registry.pivotal.io/tanzu-mysql-for-kubernetes/tanzu-mysql-operator-chart:v0.1.0
<br>ref:     registry.pivotal.io/tanzu-mysql-for-kubernetes/tanzu-mysql-operator-chart:v0.1.0
digest:  2b6e1d010ab1737dcc5a426b223a06db1c616107d2ceaf368db6fda48d96a61a
size:    4.2 KiB
name:    tanzu-mysql-operator
version: v0.1.0
Exported chart to tanzu-mysql-operator/
</pre>

## <a id="edit-chart"></a> (Optional) Edit Helm Chart

You may want to edit the values in your <%= vars.product_short %> Operator Helm chart before you install.

To edit your Helm chart:

1. Open the `values.yaml` file inside your local `tanzu-mysql-operator` directory.
    You can edit the following values:
    
    | Key            | Value Type    | Description                     | 
    |----------------|---------------|---------------------------------|
    | imagePullSecret| String        | Name of image secret. You enter this string when you create a secret with `kubectl create secret`.         |
    | operatorImage  | URI           | Location of <%= vars.product_short %> Operator image registry. You can change to your own image registry.  |
    | tanzuMySQLImage| URI           | Location of <%= vars.product_short %> Operator image registry. You can change to your own image registry.  |
    | resources      | List          | CPU and memory limits and requests. You can change these values to scale your resources.  |

    <br>See the following example `values.yaml` file:
    <pre class="terminal">---
    imagePullSecret: tanzu-mysql-image-registry
    <br>operatorImage: registry.pivotal.io/tanzu-mysql-for-kubernetes/tanzu-mysql-operator:v0.1.0
    <br>tanzuMySQLImage: registry.pivotal.io/tanzu-mysql-for-kubernetes/tanzu-mysql-instance:v0.1.0
    <br>resources:
      limits:
        cpu: 100m
        memory: 30Mi
      requests:
        cpu: 100m
        memory: 20Mi
    </pre>

## <a id="install"></a> Install Operator

To install the <%= vars.product_short %> Operator, you must use kubectl to create a namespace and secret. Then, you 
use the Helm CLI to install the Operator.

To install the Operator:

1. Create the namespace by running:

    ```
    kubectl create namespace tanzu-mysql-for-kubernetes-system
    ```

1. Set the context of the namespace by running:

    ```
    kubectl config set-context --current --namespace tanzu-mysql-for-kubernetes-system
    ```

1. Create the secret for the <%= vars.product_short %> image by running:

    ```
    kubectl create secret docker-registry tanzu-mysql-image-registry --docker-server=https://registry.pivotal.io/ \
    --docker-username=DOCKER-USERNAME --docker-password=DOCKER-PASSWORD
    ```

1. Go to the `tanzu-mysql-operator` directory.
    <br>For example:
    <pre class="terminal">$ cd ./tanzu-mysql-operator</pre>

1. Install the <%= vars.product_short %> Operator by running:

    ```
    helm install tanzu-mysql-operator .
    ```

1. See that your Operator has the `STATUS` of `Running` by running:

    ```
    kubectl get all
    ```
    See example output:
    <pre class="terminal">NAME                                                           READY   STATUS    RESTARTS   AGE
pod/mysql-for-kubernetes-controller-manager-84d76dfb77-lq5mb   1/1     <span style="color: #77bf00;">Running</span>   0          21s
<br>NAME                                                      READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/mysql-for-kubernetes-controller-manager   1/1     1            1           23s
<br>NAME                                                                 DESIRED   CURRENT   READY   AGE
replicaset.apps/mysql-for-kubernetes-controller-manager-84d76dfb77   1         1         1       23s</pre>
    <p class="note"><strong>Note:</strong> You can only have one <%= vars.product_short %> Operator installed.</p>